{
  "Version": "2019-10-30",
  "StartAction": "b1f189b3-b138-4cc1-9698-3a4226df878b",
  "Metadata": {
    "entryPointPosition": {
      "x": 15,
      "y": 197
    },
    "snapToGrid": false,
    "ActionMetadata": {
      "2fb6475a-483b-4100-8b76-af48f706fc0d": {
        "position": {
          "x": 3094,
          "y": 996
        },
        "useDynamic": false,
        "ContactFlow": {
          "id": "{{contactFlows.RulesEngineError.arn}}",
          "text": "RulesEngineError"
        }
      },
      "76c95b63-e1f5-4901-b488-d350f47d35c4": {
        "position": {
          "x": 3389,
          "y": 1084
        }
      },
      "3ec10f10-26bf-42a2-a4c2-a99a876d2d16": {
        "position": {
          "x": 1833,
          "y": 981
        }
      },
      "040d7ca8-121f-459c-97da-536a99bfab69": {
        "position": {
          "x": 1239,
          "y": 644
        },
        "useDynamic": false,
        "ContactFlow": {
          "id": "{{contactFlows.RulesEngineError.arn}}",
          "text": "RulesEngineError"
        }
      },
      "5d364300-1a8f-4b3e-b04b-7f238e778654": {
        "position": {
          "x": 444,
          "y": 455
        },
        "conditionMetadata": [],
        "useDynamic": true,
        "dynamicMetadata": {},
        "useLexBotDropdown": false,
        "useDynamicLexBotArn": true
      },
      "c454adc7-c369-4348-837b-89e30f888aa3": {
        "position": {
          "x": 456,
          "y": 230
        },
        "conditionMetadata": [],
        "useDynamic": true,
        "dynamicMetadata": {},
        "useLexBotDropdown": false,
        "useDynamicLexBotArn": true
      },
      "ea12108d-9860-496e-8e63-34abbdcbec58": {
        "position": {
          "x": 459,
          "y": 15
        },
        "conditionMetadata": [],
        "useDynamic": true,
        "dynamicMetadata": {},
        "useLexBotDropdown": false,
        "useDynamicLexBotArn": true
      },
      "dd83d703-a865-4252-844e-f72b52cae0a7": {
        "position": {
          "x": 1509,
          "y": 250
        },
        "conditionMetadata": [
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "ssml",
            "id": "94a7b28a-022b-4f38-bcf0-d32738db05c1"
          },
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "prompt",
            "id": "e334563f-a2fc-405c-8218-0cf8b3530479"
          },
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "text",
            "id": "77d0ab04-c402-4e5b-b13f-17bb2215eee1"
          }
        ]
      },
      "74e6078b-c860-4c1d-8b0a-302aeec2692a": {
        "position": {
          "x": 1509,
          "y": 633
        },
        "useDynamic": false,
        "ContactFlow": {
          "id": "{{contactFlows.RulesEngineMain.arn}}",
          "text": "RulesEngineMain"
        }
      },
      "1da46932-c28d-4c63-a420-69c8d13cfe92": {
        "position": {
          "x": 865,
          "y": 62
        },
        "dynamicMetadata": {
          "matchedIntent": true,
          "intentConfidence": true,
          "slotValue": true
        },
        "useDynamic": false
      },
      "30b73286-019b-4257-8298-a237bec82586": {
        "position": {
          "x": 868,
          "y": 329
        },
        "dynamicMetadata": {
          "matchedIntent": false
        },
        "useDynamic": false
      },
      "d3103df7-8c4a-4829-82bd-52880b21a46e": {
        "position": {
          "x": 1201,
          "y": 241
        },
        "conditionMetadata": [
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "false",
            "id": "f54dfa86-4439-4b0c-83e5-e7fe2b614134"
          }
        ]
      },
      "73a4a10d-6cc2-40ce-bcf2-d66874492c18": {
        "position": {
          "x": 2525,
          "y": 474
        }
      },
      "2f7fb657-68d3-49ab-9c6c-beeb602f5957": {
        "position": {
          "x": 1807,
          "y": 100
        },
        "useDynamic": true
      },
      "00bccc9d-7737-4e9b-9901-8dd45987f341": {
        "position": {
          "x": 1816,
          "y": 568
        },
        "useDynamic": true
      },
      "676b6fe6-da6f-4fcc-ac77-a0b2e7364dc9": {
        "position": {
          "x": 1815,
          "y": 333
        },
        "useDynamic": true
      },
      "b9a2a5c9-ccda-498e-af91-5bfee1c334fa": {
        "position": {
          "x": 2797,
          "y": 924
        },
        "useDynamic": false,
        "ContactFlow": {
          "id": "{{contactFlows.RulesEngineMain.arn}}",
          "text": "RulesEngineMain"
        }
      },
      "b1f189b3-b138-4cc1-9698-3a4226df878b": {
        "position": {
          "x": 189,
          "y": 172
        },
        "conditionMetadata": [
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "text",
            "id": "c8a41a6e-1109-4fe2-9c5c-a0473126c79f"
          },
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "ssml",
            "id": "d418088d-8c03-498d-b83c-44e0d1a96923"
          },
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "prompt",
            "id": "f60717e8-6ab7-4aeb-a344-dbc0eb27078b"
          }
        ]
      },
      "f96657de-cb1d-4a56-842e-a70d4640e73b": {
        "position": {
          "x": 2204,
          "y": 383
        },
        "conditionMetadata": [
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "true",
            "id": "7c0d80f7-41ad-4f96-96a3-9ca265b88683"
          }
        ]
      },
      "41449a37-e085-41a1-b389-13a75f4764af": {
        "position": {
          "x": 2532,
          "y": 663
        },
        "conditionMetadata": [
          {
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "true",
            "id": "dbb7ba41-d343-45d9-869b-81454364cb42"
          }
        ]
      }
    }
  },
  "Actions": [
    {
      "Identifier": "2fb6475a-483b-4100-8b76-af48f706fc0d",
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineError.arn}}"
      },
      "Transitions": {
        "NextAction": "76c95b63-e1f5-4901-b488-d350f47d35c4",
        "Errors": [
          {
            "NextAction": "76c95b63-e1f5-4901-b488-d350f47d35c4",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "TransferToFlow"
    },
    {
      "Identifier": "76c95b63-e1f5-4901-b488-d350f47d35c4",
      "Type": "DisconnectParticipant",
      "Parameters": {},
      "Transitions": {}
    },
    {
      "Identifier": "3ec10f10-26bf-42a2-a4c2-a99a876d2d16",
      "Type": "DisconnectParticipant",
      "Parameters": {},
      "Transitions": {}
    },
    {
      "Identifier": "040d7ca8-121f-459c-97da-536a99bfab69",
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineError.arn}}"
      },
      "Transitions": {
        "NextAction": "3ec10f10-26bf-42a2-a4c2-a99a876d2d16",
        "Errors": [
          {
            "NextAction": "3ec10f10-26bf-42a2-a4c2-a99a876d2d16",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "TransferToFlow"
    },
    {
      "Identifier": "5d364300-1a8f-4b3e-b04b-7f238e778654",
      "Parameters": {
        "Text": "$.External.CurrentRule_offerMessage",
        "LexV2Bot": {
          "AliasArn": "$.External.CurrentRule_lexBotArn"
        }
      },
      "Transitions": {
        "NextAction": "30b73286-019b-4257-8298-a237bec82586",
        "Errors": [
          {
            "NextAction": "30b73286-019b-4257-8298-a237bec82586",
            "ErrorType": "NoMatchingError"
          },
          {
            "NextAction": "1da46932-c28d-4c63-a420-69c8d13cfe92",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": []
      },
      "Type": "ConnectParticipantWithLexBot"
    },
    {
      "Identifier": "c454adc7-c369-4348-837b-89e30f888aa3",
      "Parameters": {
        "PromptId": "$.External.CurrentRule_offerMessagePromptArn",
        "LexV2Bot": {
          "AliasArn": "$.External.CurrentRule_lexBotArn"
        }
      },
      "Transitions": {
        "NextAction": "30b73286-019b-4257-8298-a237bec82586",
        "Errors": [
          {
            "NextAction": "30b73286-019b-4257-8298-a237bec82586",
            "ErrorType": "NoMatchingError"
          },
          {
            "NextAction": "1da46932-c28d-4c63-a420-69c8d13cfe92",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": []
      },
      "Type": "ConnectParticipantWithLexBot"
    },
    {
      "Identifier": "ea12108d-9860-496e-8e63-34abbdcbec58",
      "Parameters": {
        "SSML": "$.External.CurrentRule_offerMessage",
        "LexV2Bot": {
          "AliasArn": "$.External.CurrentRule_lexBotArn"
        }
      },
      "Transitions": {
        "NextAction": "30b73286-019b-4257-8298-a237bec82586",
        "Errors": [
          {
            "NextAction": "30b73286-019b-4257-8298-a237bec82586",
            "ErrorType": "NoMatchingError"
          },
          {
            "NextAction": "1da46932-c28d-4c63-a420-69c8d13cfe92",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": []
      },
      "Type": "ConnectParticipantWithLexBot"
    },
    {
      "Identifier": "dd83d703-a865-4252-844e-f72b52cae0a7",
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_errorMessageType"
      },
      "Transitions": {
        "NextAction": "00bccc9d-7737-4e9b-9901-8dd45987f341",
        "Errors": [
          {
            "NextAction": "00bccc9d-7737-4e9b-9901-8dd45987f341",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": [
          {
            "NextAction": "2f7fb657-68d3-49ab-9c6c-beeb602f5957",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ssml"
              ]
            }
          },
          {
            "NextAction": "676b6fe6-da6f-4fcc-ac77-a0b2e7364dc9",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "prompt"
              ]
            }
          },
          {
            "NextAction": "00bccc9d-7737-4e9b-9901-8dd45987f341",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "text"
              ]
            }
          }
        ]
      },
      "Type": "Compare"
    },
    {
      "Identifier": "74e6078b-c860-4c1d-8b0a-302aeec2692a",
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineMain.arn}}"
      },
      "Transitions": {
        "NextAction": "3ec10f10-26bf-42a2-a4c2-a99a876d2d16",
        "Errors": [
          {
            "NextAction": "3ec10f10-26bf-42a2-a4c2-a99a876d2d16",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "TransferToFlow"
    },
    {
      "Identifier": "1da46932-c28d-4c63-a420-69c8d13cfe92",
      "Parameters": {
        "LambdaFunctionARN": "{{lambdaFunctions.connectnluinput.arn}}",
        "InvocationTimeLimitSeconds": "7",
        "LambdaInvocationAttributes": {
          "intentConfidence": "$.Lex.IntentConfidence.Score",
          "matchedIntent": "$.Lex.IntentName",
          "slotValue": "$.Lex.Slots.dataslot"
        }
      },
      "Transitions": {
        "NextAction": "d3103df7-8c4a-4829-82bd-52880b21a46e",
        "Errors": [
          {
            "NextAction": "040d7ca8-121f-459c-97da-536a99bfab69",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "InvokeLambdaFunction"
    },
    {
      "Identifier": "30b73286-019b-4257-8298-a237bec82586",
      "Parameters": {
        "LambdaFunctionARN": "{{lambdaFunctions.connectnluinput.arn}}",
        "InvocationTimeLimitSeconds": "7",
        "LambdaInvocationAttributes": {
          "matchedIntent": "NOINPUT"
        }
      },
      "Transitions": {
        "NextAction": "d3103df7-8c4a-4829-82bd-52880b21a46e",
        "Errors": [
          {
            "NextAction": "040d7ca8-121f-459c-97da-536a99bfab69",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "InvokeLambdaFunction"
    },
    {
      "Identifier": "d3103df7-8c4a-4829-82bd-52880b21a46e",
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_validSelection"
      },
      "Transitions": {
        "NextAction": "74e6078b-c860-4c1d-8b0a-302aeec2692a",
        "Errors": [
          {
            "NextAction": "74e6078b-c860-4c1d-8b0a-302aeec2692a",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": [
          {
            "NextAction": "dd83d703-a865-4252-844e-f72b52cae0a7",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "false"
              ]
            }
          }
        ]
      },
      "Type": "Compare"
    },
    {
      "Identifier": "73a4a10d-6cc2-40ce-bcf2-d66874492c18",
      "Type": "DisconnectParticipant",
      "Parameters": {},
      "Transitions": {}
    },
    {
      "Identifier": "2f7fb657-68d3-49ab-9c6c-beeb602f5957",
      "Parameters": {
        "SSML": "$.External.CurrentRule_errorMessage"
      },
      "Transitions": {
        "NextAction": "f96657de-cb1d-4a56-842e-a70d4640e73b",
        "Errors": [
          {
            "NextAction": "f96657de-cb1d-4a56-842e-a70d4640e73b",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "MessageParticipant"
    },
    {
      "Identifier": "00bccc9d-7737-4e9b-9901-8dd45987f341",
      "Parameters": {
        "Text": "$.External.CurrentRule_errorMessage"
      },
      "Transitions": {
        "NextAction": "f96657de-cb1d-4a56-842e-a70d4640e73b",
        "Errors": [
          {
            "NextAction": "f96657de-cb1d-4a56-842e-a70d4640e73b",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "MessageParticipant"
    },
    {
      "Identifier": "676b6fe6-da6f-4fcc-ac77-a0b2e7364dc9",
      "Parameters": {
        "PromptId": "$.External.CurrentRule_errorMessagePromptArn"
      },
      "Transitions": {
        "NextAction": "f96657de-cb1d-4a56-842e-a70d4640e73b",
        "Errors": [
          {
            "NextAction": "f96657de-cb1d-4a56-842e-a70d4640e73b",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "MessageParticipant"
    },
    {
      "Identifier": "b9a2a5c9-ccda-498e-af91-5bfee1c334fa",
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineMain.arn}}"
      },
      "Transitions": {
        "NextAction": "2fb6475a-483b-4100-8b76-af48f706fc0d",
        "Errors": [
          {
            "NextAction": "2fb6475a-483b-4100-8b76-af48f706fc0d",
            "ErrorType": "NoMatchingError"
          }
        ],
        "Conditions": []
      },
      "Type": "TransferToFlow"
    },
    {
      "Identifier": "b1f189b3-b138-4cc1-9698-3a4226df878b",
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_offerMessageType"
      },
      "Transitions": {
        "NextAction": "5d364300-1a8f-4b3e-b04b-7f238e778654",
        "Errors": [
          {
            "NextAction": "5d364300-1a8f-4b3e-b04b-7f238e778654",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": [
          {
            "NextAction": "5d364300-1a8f-4b3e-b04b-7f238e778654",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "text"
              ]
            }
          },
          {
            "NextAction": "ea12108d-9860-496e-8e63-34abbdcbec58",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ssml"
              ]
            }
          },
          {
            "NextAction": "c454adc7-c369-4348-837b-89e30f888aa3",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "prompt"
              ]
            }
          }
        ]
      },
      "Type": "Compare"
    },
    {
      "Identifier": "f96657de-cb1d-4a56-842e-a70d4640e73b",
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_terminate"
      },
      "Transitions": {
        "NextAction": "41449a37-e085-41a1-b389-13a75f4764af",
        "Errors": [
          {
            "NextAction": "41449a37-e085-41a1-b389-13a75f4764af",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": [
          {
            "NextAction": "73a4a10d-6cc2-40ce-bcf2-d66874492c18",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "true"
              ]
            }
          }
        ]
      },
      "Type": "Compare"
    },
    {
      "Identifier": "41449a37-e085-41a1-b389-13a75f4764af",
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_done"
      },
      "Transitions": {
        "NextAction": "b1f189b3-b138-4cc1-9698-3a4226df878b",
        "Errors": [
          {
            "NextAction": "b1f189b3-b138-4cc1-9698-3a4226df878b",
            "ErrorType": "NoMatchingCondition"
          }
        ],
        "Conditions": [
          {
            "NextAction": "b9a2a5c9-ccda-498e-af91-5bfee1c334fa",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "true"
              ]
            }
          }
        ]
      },
      "Type": "Compare"
    }
  ]
}
