{
  "Version": "2019-10-30",
  "StartAction": "8e49320b-f184-49a2-92e0-b29a2570e54e",
  "Metadata": {
    "entryPointPosition": {
      "x": -298.40000000000003,
      "y": 133.6
    },
    "ActionMetadata": {
      "23d7065d-8800-4cb0-9a23-01d78ec07d60": {
        "position": {
          "x": 3361.6000000000004,
          "y": 837.6
        },
        "parameters": {
          "ContactFlowId": {
            "displayName": "RulesEngineError"
          }
        },
        "ContactFlow": {
          "text": "RulesEngineError"
        }
      },
      "bd579c28-84a0-4c57-96d6-8f84269a675f": {
        "position": {
          "x": 3644.8,
          "y": 928
        }
      },
      "bd08e6a0-e8fc-462b-a5a5-4c3813169ad4": {
        "position": {
          "x": 4112.8,
          "y": 1538.4
        }
      },
      "a9166b13-a49c-4705-96f9-7baa66261fe4": {
        "position": {
          "x": 540.8000000000001,
          "y": 189.60000000000002
        },
        "parameters": {
          "SSML": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "aa494261-d5f8-4cbb-b049-9ef30a79eb87": {
        "position": {
          "x": 536.8000000000001,
          "y": 384.8
        },
        "parameters": {
          "PromptId": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "b1f189b3-b138-4cc1-9698-3a4226df878b": {
        "position": {
          "x": 256,
          "y": 71.2
        },
        "conditionMetadata": [
          {
            "id": "e8589e0b-7e5a-42a1-8f7b-916b31a6118a",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "text"
          },
          {
            "id": "48be264c-3a15-4946-801c-b15ce82c9200",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "ssml"
          },
          {
            "id": "bfcf4fd8-0251-47d6-b169-06382329fc1a",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "prompt"
          }
        ]
      },
      "3998f9c7-92ac-4b20-a524-d0b6e71c4a91": {
        "position": {
          "x": 542.4,
          "y": 14.4
        },
        "parameters": {
          "Text": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "46677a44-efb2-48c1-b0de-b82264dd971b": {
        "position": {
          "x": 868.8000000000001,
          "y": 193.60000000000002
        },
        "parameters": {
          "LexV2Bot": {
            "AliasArn": {
              "useDynamic": true,
              "useLexBotDropdown": false
            }
          },
          "LexSessionAttributes": {
            "ContactId": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "x-amz-lex:audio:end-timeout-ms:*": false,
          "x-amz-lex:audio:start-timeout-ms:*": false,
          "ContactId": true
        },
        "useDynamicLexBotArn": true,
        "lexV2BotName": "",
        "conditionMetadata": []
      },
      "484c220b-3ebb-4527-8f4c-d50502a15653": {
        "position": {
          "x": 869.6,
          "y": 428.8
        },
        "parameters": {
          "Text": {
            "useDynamic": true
          },
          "LexV2Bot": {
            "AliasArn": {
              "useDynamic": true,
              "useLexBotDropdown": false
            }
          },
          "LexSessionAttributes": {
            "ContactId": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "x-amz-lex:audio:end-timeout-ms:*": false,
          "x-amz-lex:audio:start-timeout-ms:*": false,
          "ContactId": true
        },
        "useDynamicLexBotArn": true,
        "lexV2BotName": "",
        "useDynamic": true,
        "conditionMetadata": []
      },
      "170e37bd-6ca2-48ea-8abe-07b689a142dd": {
        "position": {
          "x": 2824,
          "y": 451.20000000000005
        }
      },
      "1da46932-c28d-4c63-a420-69c8d13cfe92": {
        "position": {
          "x": 1152.8,
          "y": 48
        },
        "parameters": {
          "LambdaInvocationAttributes": {
            "intentConfidence": {
              "useDynamic": true
            },
            "matchedIntent": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "intentConfidence": true,
          "matchedIntent": true
        }
      },
      "5b9d2e54-d6c4-4b1c-8e56-4793463690a0": {
        "position": {
          "x": 1155.2,
          "y": 320.8
        },
        "dynamicMetadata": {
          "matchedIntent": false
        }
      },
      "6e185ad4-af56-4267-8b21-1f90f35c3dda": {
        "position": {
          "x": 1691.2,
          "y": 212
        },
        "conditionMetadata": [
          {
            "id": "acc8c770-02e0-46a1-ad7c-ae722515060b",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "false"
          }
        ]
      },
      "9d619ea2-cf88-494d-b877-ae4b121d67e8": {
        "position": {
          "x": 2280.8,
          "y": 340.8
        },
        "parameters": {
          "SSML": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "cb2bc8de-55d8-42df-b0b1-146775db2288": {
        "position": {
          "x": 2280.8,
          "y": 548
        },
        "parameters": {
          "PromptId": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "d336e0f6-fc46-432a-aaef-ad4b49f05f97": {
        "position": {
          "x": 2280.8,
          "y": 148.8
        },
        "parameters": {
          "Text": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "6bd4703f-c553-4f1c-b8e8-3c83658c44ca": {
        "position": {
          "x": 1975.2,
          "y": 258.40000000000003
        },
        "conditionMetadata": [
          {
            "id": "29516e26-5131-48df-83b6-a11a5413dde0",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "text"
          },
          {
            "id": "b845ef2e-6a03-4cd6-8f6f-16f270a7ca22",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "ssml"
          },
          {
            "id": "074738c9-35b1-47a3-8dd2-a5375c799ebb",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "prompt"
          }
        ]
      },
      "51760e39-09ec-427d-bc4c-be6972a21433": {
        "position": {
          "x": 1472.8000000000002,
          "y": 612.8000000000001
        },
        "parameters": {
          "ContactFlowId": {
            "displayName": "RulesEngineError"
          }
        },
        "ContactFlow": {
          "text": "RulesEngineError"
        }
      },
      "3ea180fb-b40a-4968-bb71-787b7bf9bf6f": {
        "position": {
          "x": 1944,
          "y": 656.8000000000001
        }
      },
      "47d9b95e-1a5a-4f5e-90d0-ec9d64b36ca2": {
        "position": {
          "x": 3034.4,
          "y": 774.4000000000001
        },
        "parameters": {
          "ContactFlowId": {
            "displayName": "RulesEngineMain"
          }
        },
        "ContactFlow": {
          "text": "RulesEngineMain"
        }
      },
      "98fef1c2-8869-4c9e-a914-f594ee974d80": {
        "position": {
          "x": 2522.4,
          "y": 408.8
        },
        "conditionMetadata": [
          {
            "id": "b8ce9598-47f3-4732-a448-7b00729a85ff",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "true"
          }
        ]
      },
      "ca7e8bcf-5d5b-48fc-aff8-6c4da5d39bb7": {
        "position": {
          "x": 2786.4,
          "y": 702.4000000000001
        },
        "conditionMetadata": [
          {
            "id": "940f7465-d3ac-41c8-b463-7a9a332c9def",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "true"
          }
        ]
      },
      "d8607387-0f89-4150-9781-5f68096e73f6": {
        "position": {
          "x": 3132.8,
          "y": 1693.6000000000001
        },
        "parameters": {
          "ContactFlowId": {
            "displayName": "RulesEngineError"
          }
        },
        "ContactFlow": {
          "text": "RulesEngineError"
        }
      },
      "7b777776-a8ea-4160-be98-871e38789663": {
        "position": {
          "x": 3430.4,
          "y": 1739.2
        }
      },
      "108bec88-2e27-4691-a64b-ece9696c70d4": {
        "position": {
          "x": 2029.6000000000001,
          "y": 1197.6000000000001
        },
        "parameters": {
          "SSML": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "c677b244-a7c6-4705-b0d1-737790fa9c3b": {
        "position": {
          "x": 2045.6000000000001,
          "y": 897.6
        },
        "parameters": {
          "Text": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "53210904-d733-4999-9e1d-cf5c0b84e219": {
        "position": {
          "x": 1475.2,
          "y": 988
        },
        "conditionMetadata": [
          {
            "id": "a90d412c-0fcf-4fda-baae-9487ed9d0cfd",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "CHAT"
          }
        ]
      },
      "854aff21-0344-45e3-b9e5-d03af3a2ec3e": {
        "position": {
          "x": 1757.6000000000001,
          "y": 1003.2
        },
        "conditionMetadata": [
          {
            "id": "00fd808e-d56a-43de-bf90-a6584dce0b97",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "text"
          },
          {
            "id": "2d14b04d-d8a6-440b-9bd6-1fe03f0e4d27",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "ssml"
          }
        ]
      },
      "6bccda20-3a4f-49d3-a00e-75ff410aa78b": {
        "position": {
          "x": 2348,
          "y": 1435.2
        },
        "parameters": {
          "Text": {
            "useDynamic": true
          }
        },
        "useDynamic": true
      },
      "6f1c30b6-ca5a-4b3a-ad09-2b6cebdc48d3": {
        "position": {
          "x": 2083.2000000000003,
          "y": 1420.8000000000002
        },
        "conditionMetadata": [
          {
            "id": "db083ee4-9984-4a6f-974b-412f6db584f1",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "text"
          }
        ]
      },
      "8e49320b-f184-49a2-92e0-b29a2570e54e": {
        "position": {
          "x": -63.2,
          "y": 127.2
        },
        "conditionMetadata": [
          {
            "id": "62066d4f-eb76-459d-bc8c-5971c604f724",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "CHAT"
          }
        ]
      },
      "5a080220-4e67-4dc5-afb7-a3690d45a77a": {
        "position": {
          "x": 2309.6,
          "y": 1064
        },
        "conditionMetadata": [
          {
            "id": "48a65283-fca9-4f04-9315-9a075055d3b4",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "true"
          }
        ]
      },
      "03dee57f-c3e5-47f4-beec-b820f0611d02": {
        "position": {
          "x": 1768,
          "y": 1376.8000000000002
        },
        "conditionMetadata": [
          {
            "id": "6fd95913-c3a2-489f-88a7-10c550525ff5",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "true"
          }
        ]
      },
      "3863d146-354c-4046-bfe5-d883f2ae282a": {
        "position": {
          "x": 2823.2000000000003,
          "y": 1651.2
        },
        "parameters": {
          "ContactFlowId": {
            "displayName": "RulesEngineMain"
          }
        },
        "ContactFlow": {
          "text": "RulesEngineMain"
        }
      },
      "e22a3ab9-3263-44fc-9299-59b3153bd2a3": {
        "position": {
          "x": 2090.4,
          "y": 1621.6000000000001
        },
        "conditionMetadata": [
          {
            "id": "c0cdd282-cc6e-4303-b17f-578d559120d0",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "text"
          }
        ]
      },
      "4c59a722-d301-49c5-8c4d-2f9fc4b9558d": {
        "position": {
          "x": 3482.4,
          "y": 1133.6000000000001
        },
        "parameters": {
          "ContactFlowId": {
            "displayName": "RulesEngineMain"
          }
        },
        "ContactFlow": {
          "text": "RulesEngineMain"
        }
      },
      "96d74cf8-be0a-4c0d-ae90-94146f184640": {
        "position": {
          "x": 3760,
          "y": 1396.8000000000002
        },
        "parameters": {
          "ContactFlowId": {
            "displayName": "RulesEngineError"
          }
        },
        "ContactFlow": {
          "text": "RulesEngineError"
        }
      },
      "aff7a396-3fef-4a21-87aa-a814a31f13f6": {
        "position": {
          "x": 3060,
          "y": 1065.6000000000001
        },
        "parameters": {
          "LambdaInvocationAttributes": {
            "key1": {
              "useDynamic": true
            },
            "value2": {
              "useDynamic": true
            },
            "value1": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "key1": true,
          "key2": false,
          "value2": true,
          "value1": true
        }
      },
      "2a28b58d-af15-467f-91f0-4d35a6834c92": {
        "position": {
          "x": 2648,
          "y": 1043.2
        },
        "parameters": {
          "LexV2Bot": {
            "AliasArn": {
              "useDynamic": true,
              "useLexBotDropdown": false
            }
          },
          "LexSessionAttributes": {
            "ContactId": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "x-amz-lex:audio:end-timeout-ms:*": false,
          "x-amz-lex:audio:start-timeout-ms:*": false,
          "ContactId": true
        },
        "useDynamicLexBotArn": true,
        "lexV2BotName": "",
        "conditionMetadata": [
          {
            "id": "0036b649-1e51-4331-af33-d9e2645442f4",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "Yes"
          }
        ]
      },
      "984be4f0-5f64-4d9a-b333-6a643516857e": {
        "position": {
          "x": 2369.6,
          "y": 1645.6000000000001
        },
        "parameters": {
          "Text": {
            "useDynamic": true
          },
          "LexV2Bot": {
            "AliasArn": {
              "useDynamic": true,
              "useLexBotDropdown": false
            }
          },
          "LexSessionAttributes": {
            "ContactId": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "x-amz-lex:audio:end-timeout-ms:*": false,
          "x-amz-lex:audio:start-timeout-ms:*": false,
          "ContactId": true
        },
        "useDynamicLexBotArn": true,
        "lexV2BotName": "",
        "useDynamic": true,
        "conditionMetadata": [
          {
            "id": "4d40e0b9-8edc-46d9-9062-69f8a3f49dd8",
            "operator": {
              "name": "Equals",
              "value": "Equals",
              "shortDisplay": "="
            },
            "value": "Yes"
          }
        ]
      },
      "63e4ab58-f385-4a7d-a710-b3dc09156d3a": {
        "position": {
          "x": 3084,
          "y": 1342.4
        },
        "parameters": {
          "LambdaInvocationAttributes": {
            "key1": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "key1": true,
          "value1": false
        }
      }
    }
  },
  "Actions": [
    {
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineError.arn}}"
      },
      "Identifier": "23d7065d-8800-4cb0-9a23-01d78ec07d60",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "bd579c28-84a0-4c57-96d6-8f84269a675f",
        "Errors": [
          {
            "NextAction": "bd579c28-84a0-4c57-96d6-8f84269a675f",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "bd579c28-84a0-4c57-96d6-8f84269a675f",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {},
      "Identifier": "bd08e6a0-e8fc-462b-a5a5-4c3813169ad4",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "SSML": "$.External.CurrentRule_offerMessage"
      },
      "Identifier": "a9166b13-a49c-4705-96f9-7baa66261fe4",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "46677a44-efb2-48c1-b0de-b82264dd971b"
      }
    },
    {
      "Parameters": {
        "PromptId": "$.External.CurrentRule_offerMessagePromptArn"
      },
      "Identifier": "aa494261-d5f8-4cbb-b049-9ef30a79eb87",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "46677a44-efb2-48c1-b0de-b82264dd971b"
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_offerMessageType"
      },
      "Identifier": "b1f189b3-b138-4cc1-9698-3a4226df878b",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "3998f9c7-92ac-4b20-a524-d0b6e71c4a91",
        "Conditions": [
          {
            "NextAction": "3998f9c7-92ac-4b20-a524-d0b6e71c4a91",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "text"
              ]
            }
          },
          {
            "NextAction": "a9166b13-a49c-4705-96f9-7baa66261fe4",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ssml"
              ]
            }
          },
          {
            "NextAction": "aa494261-d5f8-4cbb-b049-9ef30a79eb87",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "prompt"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "3998f9c7-92ac-4b20-a524-d0b6e71c4a91",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.External.CurrentRule_offerMessage"
      },
      "Identifier": "3998f9c7-92ac-4b20-a524-d0b6e71c4a91",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "46677a44-efb2-48c1-b0de-b82264dd971b"
      }
    },
    {
      "Parameters": {
        "Text": " ",
        "LexV2Bot": {
          "AliasArn": "$.External.CurrentRule_lexBotArn"
        },
        "LexSessionAttributes": {
          "x-amz-lex:audio:end-timeout-ms:*": "2000",
          "x-amz-lex:audio:start-timeout-ms:*": "10000",
          "ContactId": "$.ContactId"
        }
      },
      "Identifier": "46677a44-efb2-48c1-b0de-b82264dd971b",
      "Type": "ConnectParticipantWithLexBot",
      "Transitions": {
        "NextAction": "5b9d2e54-d6c4-4b1c-8e56-4793463690a0",
        "Errors": [
          {
            "NextAction": "1da46932-c28d-4c63-a420-69c8d13cfe92",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "5b9d2e54-d6c4-4b1c-8e56-4793463690a0",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.External.CurrentRule_offerMessage",
        "LexV2Bot": {
          "AliasArn": "$.External.CurrentRule_lexBotArn"
        },
        "LexSessionAttributes": {
          "x-amz-lex:audio:end-timeout-ms:*": "2000",
          "x-amz-lex:audio:start-timeout-ms:*": "10000",
          "ContactId": "$.ContactId"
        }
      },
      "Identifier": "484c220b-3ebb-4527-8f4c-d50502a15653",
      "Type": "ConnectParticipantWithLexBot",
      "Transitions": {
        "NextAction": "5b9d2e54-d6c4-4b1c-8e56-4793463690a0",
        "Errors": [
          {
            "NextAction": "1da46932-c28d-4c63-a420-69c8d13cfe92",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "5b9d2e54-d6c4-4b1c-8e56-4793463690a0",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "170e37bd-6ca2-48ea-8abe-07b689a142dd",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "{{lambdaFunctions.connectnlumenu.arn}}",
        "InvocationTimeLimitSeconds": "7",
        "LambdaInvocationAttributes": {
          "intentConfidence": "$.Lex.IntentConfidence.Score",
          "matchedIntent": "$.Lex.IntentName"
        }
      },
      "Identifier": "1da46932-c28d-4c63-a420-69c8d13cfe92",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "6e185ad4-af56-4267-8b21-1f90f35c3dda",
        "Errors": [
          {
            "NextAction": "51760e39-09ec-427d-bc4c-be6972a21433",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "{{lambdaFunctions.connectnlumenu.arn}}",
        "InvocationTimeLimitSeconds": "3",
        "LambdaInvocationAttributes": {
          "matchedIntent": "NOMATCH"
        }
      },
      "Identifier": "5b9d2e54-d6c4-4b1c-8e56-4793463690a0",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "6e185ad4-af56-4267-8b21-1f90f35c3dda",
        "Errors": [
          {
            "NextAction": "51760e39-09ec-427d-bc4c-be6972a21433",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_validInput"
      },
      "Identifier": "6e185ad4-af56-4267-8b21-1f90f35c3dda",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "53210904-d733-4999-9e1d-cf5c0b84e219",
        "Conditions": [
          {
            "NextAction": "6bd4703f-c553-4f1c-b8e8-3c83658c44ca",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "false"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "53210904-d733-4999-9e1d-cf5c0b84e219",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "SSML": "$.External.CurrentRule_errorMessage"
      },
      "Identifier": "9d619ea2-cf88-494d-b877-ae4b121d67e8",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "98fef1c2-8869-4c9e-a914-f594ee974d80",
        "Errors": [
          {
            "NextAction": "98fef1c2-8869-4c9e-a914-f594ee974d80",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "PromptId": "$.External.CurrentRule_errorMessagePromptArn"
      },
      "Identifier": "cb2bc8de-55d8-42df-b0b1-146775db2288",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "98fef1c2-8869-4c9e-a914-f594ee974d80",
        "Errors": [
          {
            "NextAction": "98fef1c2-8869-4c9e-a914-f594ee974d80",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.External.CurrentRule_errorMessage"
      },
      "Identifier": "d336e0f6-fc46-432a-aaef-ad4b49f05f97",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "98fef1c2-8869-4c9e-a914-f594ee974d80",
        "Errors": [
          {
            "NextAction": "98fef1c2-8869-4c9e-a914-f594ee974d80",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_errorMessageType"
      },
      "Identifier": "6bd4703f-c553-4f1c-b8e8-3c83658c44ca",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "d336e0f6-fc46-432a-aaef-ad4b49f05f97",
        "Conditions": [
          {
            "NextAction": "d336e0f6-fc46-432a-aaef-ad4b49f05f97",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "text"
              ]
            }
          },
          {
            "NextAction": "9d619ea2-cf88-494d-b877-ae4b121d67e8",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ssml"
              ]
            }
          },
          {
            "NextAction": "cb2bc8de-55d8-42df-b0b1-146775db2288",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "prompt"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "d336e0f6-fc46-432a-aaef-ad4b49f05f97",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineError.arn}}"
      },
      "Identifier": "51760e39-09ec-427d-bc4c-be6972a21433",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "3ea180fb-b40a-4968-bb71-787b7bf9bf6f",
        "Errors": [
          {
            "NextAction": "3ea180fb-b40a-4968-bb71-787b7bf9bf6f",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "3ea180fb-b40a-4968-bb71-787b7bf9bf6f",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineMain.arn}}"
      },
      "Identifier": "47d9b95e-1a5a-4f5e-90d0-ec9d64b36ca2",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "23d7065d-8800-4cb0-9a23-01d78ec07d60",
        "Errors": [
          {
            "NextAction": "23d7065d-8800-4cb0-9a23-01d78ec07d60",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_terminate"
      },
      "Identifier": "98fef1c2-8869-4c9e-a914-f594ee974d80",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "ca7e8bcf-5d5b-48fc-aff8-6c4da5d39bb7",
        "Conditions": [
          {
            "NextAction": "170e37bd-6ca2-48ea-8abe-07b689a142dd",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "true"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "ca7e8bcf-5d5b-48fc-aff8-6c4da5d39bb7",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_done"
      },
      "Identifier": "ca7e8bcf-5d5b-48fc-aff8-6c4da5d39bb7",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "8e49320b-f184-49a2-92e0-b29a2570e54e",
        "Conditions": [
          {
            "NextAction": "47d9b95e-1a5a-4f5e-90d0-ec9d64b36ca2",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "true"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "8e49320b-f184-49a2-92e0-b29a2570e54e",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineError.arn}}"
      },
      "Identifier": "d8607387-0f89-4150-9781-5f68096e73f6",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "7b777776-a8ea-4160-be98-871e38789663",
        "Errors": [
          {
            "NextAction": "7b777776-a8ea-4160-be98-871e38789663",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "7b777776-a8ea-4160-be98-871e38789663",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "SSML": "$.External.CurrentRule_confirmationMessageFinal"
      },
      "Identifier": "108bec88-2e27-4691-a64b-ece9696c70d4",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "5a080220-4e67-4dc5-afb7-a3690d45a77a",
        "Errors": [
          {
            "NextAction": "5a080220-4e67-4dc5-afb7-a3690d45a77a",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.External.CurrentRule_confirmationMessageFinal"
      },
      "Identifier": "c677b244-a7c6-4705-b0d1-737790fa9c3b",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "5a080220-4e67-4dc5-afb7-a3690d45a77a",
        "Errors": [
          {
            "NextAction": "5a080220-4e67-4dc5-afb7-a3690d45a77a",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.Channel"
      },
      "Identifier": "53210904-d733-4999-9e1d-cf5c0b84e219",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "854aff21-0344-45e3-b9e5-d03af3a2ec3e",
        "Conditions": [
          {
            "NextAction": "03dee57f-c3e5-47f4-beec-b820f0611d02",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "CHAT"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "854aff21-0344-45e3-b9e5-d03af3a2ec3e",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_confirmationMessageFinalType"
      },
      "Identifier": "854aff21-0344-45e3-b9e5-d03af3a2ec3e",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "5a080220-4e67-4dc5-afb7-a3690d45a77a",
        "Conditions": [
          {
            "NextAction": "c677b244-a7c6-4705-b0d1-737790fa9c3b",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "text"
              ]
            }
          },
          {
            "NextAction": "108bec88-2e27-4691-a64b-ece9696c70d4",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ssml"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "5a080220-4e67-4dc5-afb7-a3690d45a77a",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.External.CurrentRule_confirmationMessageFinal"
      },
      "Identifier": "6bccda20-3a4f-49d3-a00e-75ff410aa78b",
      "Type": "MessageParticipant",
      "Transitions": {
        "NextAction": "3863d146-354c-4046-bfe5-d883f2ae282a",
        "Errors": [
          {
            "NextAction": "3863d146-354c-4046-bfe5-d883f2ae282a",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_confirmationMessageFinalType"
      },
      "Identifier": "6f1c30b6-ca5a-4b3a-ad09-2b6cebdc48d3",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "3863d146-354c-4046-bfe5-d883f2ae282a",
        "Conditions": [
          {
            "NextAction": "6bccda20-3a4f-49d3-a00e-75ff410aa78b",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "text"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "3863d146-354c-4046-bfe5-d883f2ae282a",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.Channel"
      },
      "Identifier": "8e49320b-f184-49a2-92e0-b29a2570e54e",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "b1f189b3-b138-4cc1-9698-3a4226df878b",
        "Conditions": [
          {
            "NextAction": "484c220b-3ebb-4527-8f4c-d50502a15653",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "CHAT"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "b1f189b3-b138-4cc1-9698-3a4226df878b",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_autoConfirmNow"
      },
      "Identifier": "5a080220-4e67-4dc5-afb7-a3690d45a77a",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "2a28b58d-af15-467f-91f0-4d35a6834c92",
        "Conditions": [
          {
            "NextAction": "3863d146-354c-4046-bfe5-d883f2ae282a",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "true"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "2a28b58d-af15-467f-91f0-4d35a6834c92",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_autoConfirmNow"
      },
      "Identifier": "03dee57f-c3e5-47f4-beec-b820f0611d02",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "e22a3ab9-3263-44fc-9299-59b3153bd2a3",
        "Conditions": [
          {
            "NextAction": "6f1c30b6-ca5a-4b3a-ad09-2b6cebdc48d3",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "true"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "e22a3ab9-3263-44fc-9299-59b3153bd2a3",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineMain.arn}}"
      },
      "Identifier": "3863d146-354c-4046-bfe5-d883f2ae282a",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "d8607387-0f89-4150-9781-5f68096e73f6",
        "Errors": [
          {
            "NextAction": "d8607387-0f89-4150-9781-5f68096e73f6",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ComparisonValue": "$.External.CurrentRule_confirmationMessageFinalType"
      },
      "Identifier": "e22a3ab9-3263-44fc-9299-59b3153bd2a3",
      "Type": "Compare",
      "Transitions": {
        "NextAction": "3863d146-354c-4046-bfe5-d883f2ae282a",
        "Conditions": [
          {
            "NextAction": "984be4f0-5f64-4d9a-b333-6a643516857e",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "text"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "3863d146-354c-4046-bfe5-d883f2ae282a",
            "ErrorType": "NoMatchingCondition"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineMain.arn}}"
      },
      "Identifier": "4c59a722-d301-49c5-8c4d-2f9fc4b9558d",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "96d74cf8-be0a-4c0d-ae90-94146f184640",
        "Errors": [
          {
            "NextAction": "96d74cf8-be0a-4c0d-ae90-94146f184640",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "ContactFlowId": "{{contactFlows.RulesEngineError.arn}}"
      },
      "Identifier": "96d74cf8-be0a-4c0d-ae90-94146f184640",
      "Type": "TransferToFlow",
      "Transitions": {
        "NextAction": "bd08e6a0-e8fc-462b-a5a5-4c3813169ad4",
        "Errors": [
          {
            "NextAction": "bd08e6a0-e8fc-462b-a5a5-4c3813169ad4",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "{{lambdaFunctions.connectupdatestate.arn}}",
        "InvocationTimeLimitSeconds": "7",
        "LambdaInvocationAttributes": {
          "key1": "$.External.CurrentRule_outputStateKey",
          "key2": "NextRuleSet",
          "value2": "$.External.CurrentRule_matchedIntentRuleSet",
          "value1": "$.External.CurrentRule_matchedIntent"
        }
      },
      "Identifier": "aff7a396-3fef-4a21-87aa-a814a31f13f6",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "4c59a722-d301-49c5-8c4d-2f9fc4b9558d",
        "Errors": [
          {
            "NextAction": "96d74cf8-be0a-4c0d-ae90-94146f184640",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": " ",
        "LexV2Bot": {
          "AliasArn": "$.External.CurrentRule_yesNoBotArn"
        },
        "LexSessionAttributes": {
          "x-amz-lex:audio:end-timeout-ms:*": "2000",
          "x-amz-lex:audio:start-timeout-ms:*": "10000",
          "ContactId": "$.ContactId"
        }
      },
      "Identifier": "2a28b58d-af15-467f-91f0-4d35a6834c92",
      "Type": "ConnectParticipantWithLexBot",
      "Transitions": {
        "NextAction": "63e4ab58-f385-4a7d-a710-b3dc09156d3a",
        "Conditions": [
          {
            "NextAction": "aff7a396-3fef-4a21-87aa-a814a31f13f6",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "Yes"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "63e4ab58-f385-4a7d-a710-b3dc09156d3a",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "63e4ab58-f385-4a7d-a710-b3dc09156d3a",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Text": "$.External.CurrentRule_confirmationMessageFinal",
        "LexV2Bot": {
          "AliasArn": "$.External.CurrentRule_yesNoBotArn"
        },
        "LexSessionAttributes": {
          "x-amz-lex:audio:end-timeout-ms:*": "2000",
          "x-amz-lex:audio:start-timeout-ms:*": "10000",
          "ContactId": "$.ContactId"
        }
      },
      "Identifier": "984be4f0-5f64-4d9a-b333-6a643516857e",
      "Type": "ConnectParticipantWithLexBot",
      "Transitions": {
        "NextAction": "63e4ab58-f385-4a7d-a710-b3dc09156d3a",
        "Conditions": [
          {
            "NextAction": "aff7a396-3fef-4a21-87aa-a814a31f13f6",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "Yes"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "63e4ab58-f385-4a7d-a710-b3dc09156d3a",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "63e4ab58-f385-4a7d-a710-b3dc09156d3a",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "{{lambdaFunctions.connectupdatestate.arn}}",
        "InvocationTimeLimitSeconds": "7",
        "LambdaInvocationAttributes": {
          "key1": "$.External.CurrentRule_errorCount",
          "value1": "increment"
        }
      },
      "Identifier": "63e4ab58-f385-4a7d-a710-b3dc09156d3a",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "8e49320b-f184-49a2-92e0-b29a2570e54e",
        "Errors": [
          {
            "NextAction": "8e49320b-f184-49a2-92e0-b29a2570e54e",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}
